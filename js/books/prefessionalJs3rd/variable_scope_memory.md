# 变量、作用域、内存

1. 理解基本类型和引用类型的值
2. 理解执行环境
3. 理解垃圾收集

## 基本类型和引用类型的值

1. 基本类型是按值访问的, 因为可以直接操作保存在变量中的实际的值
2. 引用类型是保存在内存中的对象, 不允许直接访问内存中的位置, 也就是说不能直接操作对象的内存空间

- 关于引用类型的复制:
  对应引用类型的复制, 同时也会将存储在变量对象中的值复制一份到为新变量分配的空间中, 不同的是这个值的副本实际上是一个指针, 而这个指针指向存储在堆中的一个对象
- js 中函数的参数都是按值传递

- 类型检测
  typeof 检测基本类型
  instanceof 检测引用类型

## 执行环境及作用域

执行环境、变量对象、作用域

## 垃圾收集

原理: 找出那些不再继续使用的变量, 然后释放其占用的内存, 为此, 垃圾收集器会按照固定的时间间隔, 周期性的执行这一操作

### 标记清除

js 中最常用的垃圾收集方式是标记清除

### 引用计数

不太常见的垃圾收集策略, 会遇到一个严重的问题就是循环引用

```js
function problem() {
  var obj1 = new Object()
  var obj2 = new Object()

  obj1.someOtherObject = obj2
  obj2.someOtherObject = obj1
}
```

### 性能问题

1. 在 IE 中调用 window.CollectGarbage()方法会立即执行垃圾收集
2. 在 Opera7 及更高的版本中调用 window.opera.collect()也会执行垃圾收集

### 管理内存

出于安全方面的考虑和防止运行 js 网页耗尽系统内存而导致系统崩溃,分配给 web 浏览器的可用内存数量比较少;
而内存的限制会导致给变量分配内存, 同时还会影响调用栈以及一个线程中能够同时执行的语句数量;
因此, 确保占用最少的内存可以让页面获得更好的性能

1. 解除引用, 即将不再使用的变量赋值为 null, (解除一个值并不意味着自动回收该值所占用的内存, 而是让值脱离执行环境, 以便垃圾收集器在下次运行时将其回收)
2. 局部变量会在它们离开执行环境时自动被解除引用
