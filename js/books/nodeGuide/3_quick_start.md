# Node 快速入门

## 异步式 I/O 与事件式编程

1. 阻塞和线程
   1. 阻塞: 线程在执行中如果遇到磁盘读写或网络通信(统称为 I/O 操作)，通常要耗费较长的时间，这时操作系统会剥夺这个线程的 CPU 控制权，使其暂停执行，同时将资源让给其他的工作线程，这种线程的调度方式称为阻塞
   2. 异步式 I/O: 当线程遇到 I/O 操作时不会以阻塞的方式等待 I/O 造作的完成或数据的返回，而是将请求发送给操作系统，继续执行下一条语句，当请求完成时，以事件的形式通知执行 I/O 操作的线程，线程会在特定时候处理这个事件
   3. node: 采用单线程事件驱动的异步式 I/O, 少了多线程的开销
2. 回调函数
   node 只是将 I/O 请求立即发送给操作系统，然后立即返回并执行后面的语句，执行完后进入事件循环监听事件，当接收到请求完成事件时，事件循环会主动调用回调函数以完成后续工作
3. 事件
   Nodejs 所有的异步 I/操作在完成时都会发送一个事件到时间队列，事件是由 eventEmitter 对象提供

**nodejs 的事件循环机制**
Q: 什么时候进入时间循环 ?
A: nodejs 由事件循环开始，也由事件循环结束，所有的逻辑都是事件的回调函数，所以 nodejs 始终在事件循环中，程序入口就是事件循环的第一事件的回调函数；回调函数在执行过程中可以会发起 I/O 操作，执行完毕后再返回事件循环, 事件循环会检查事件队列中有没有未处理的事件，直到程序结束

## 模块和包

1. 什么是模块
   是 nodejs 应用程序的基本组成部分，文件和模块是一一对应的
2. 创建及加载模块
   1. 创建模块
      一个文件就是一个模块，其中 exports 是模块公开的接口, require 用于从外部获取一个模块的接口
   2. 单次加载
      require 不会重复加载模块，也就是说无论 require 多少次获得的模块都是同一个
   3. 覆盖 exports
      事实上 exports 是一个普通的空对象
3. 创建包
   根据 CommonJS 规范实现包机制，开发了 npm 来解决包的发布和获取需求
   最简单的包就是一个作为文件夹的模块
